## AI 알고리즘  

### <font color="#77dd77">몬테카를로 트리 탐색 (MCTS)</font>

#### 특징: 

- 여러 시뮬레이션을 실행하여 가장 유망한 선택지를 찾음.

- **무작위 샘플링**을 기반으로 **승률 추정치** 계산
    
- **트리 구조**를 활용해 유망한 수를 집중 탐색
    
- **4단계 프로세스**(선택 → 확장 → 시뮬레이션 → 역전파) 반복
  
  예를 들어 바둑에서 361개의 가능한 첫 수 중 실제로 유리한 수는 일부뿐이다. MCTS는 무작위 시뮬레이션을 통해 승률이 높은 수를 선별하며, 이 과정을 **"플레이아웃"** 이라고 한다.

#### 작동 원리: 

트리 탐색 과정에서 가장 유망한 경로를 선택

탐험(새로운 경로 시도)과 활용(기존 유망 경로 집중)의 균형 유지함.



```cs
float CalculateUCB(Node node) 
{
    return (node.wins / node.visits) 
    + 1.414 * Math.Sqrt(Math.Log(parentVisits) / node.visits);
}
```

<br>

여기에서 

wins: 해당 노드에서의 승리 횟수

visits: 노드 방문 횟수

parentVisits: 부모 노드의 총 방문 횟수


#### 게임 시나리오 예시

<br>

상황: 체스 AI가 다음 수를 결정하는 과정임.

<br>

```cs
노드        승리 횟수        방문 횟수        UCB 점수
A        80        100        0.8 + 1.414*√(ln(300)/100) ≈ 1.12
B        45        50        0.9 + 1.414*√(ln(300)/50) ≈ 1.35
C        10        10        1.0 + 1.414*√(ln(300)/10) ≈ 1.98
```

결과: AI는 C 노드를 선택 (높은 UCB 점수) ➔ 덜 탐험된 경로 시도


#### 게임 예시: 

사례 1:
《Hearthstone》의 AI
상황: 플레이어가 강력한 카드 조합 사용

MCTS 동작:

선택: "카드 A 사용" 노드(승률 70%) vs "카드 B 사용" 노드(20번 미방문)

결정: UCB 점수 계산 후 덜 탐험된 "카드 B" 선택 ➔ 새로운 전략 발견 가능성



사례 2: 《StarCraft II》의 전략 선택

상황: 적이 은폐 유닛 대량 생산

MCTS 동작:

선택: "탐사정 파괴" vs "방어 건물 추가"

시뮬레이션: 무작위 전투 1,000회 실행 ➔ 역전파로 전략 평가

여기에서 역전파란 ? 

역전파는 시뮬레이션 단계에서 얻어진 결과(승리, 패배, 무승부 등)를 트리 구조 상에서 루트 노

드까지 거슬러 올라가며 각 노드의 정보를 갱신하는 과정이다.







### <font color="#77dd77">상태 기계 (Finite State Machine, FSM)</font>


특징: 캐릭터 행동을 상태별로 정의하고 전환 관리하는 패턴.

```cs
enum EnemyState { 대기, 순찰, 추적, 공격, 도주 }

의사코드 : 

// 매 프레임마다 실행되는 로직
void Update() {
    switch(현재상태) {
        case 대기:
            // 대기 행동 수행
            if(플레이어_발견()) 현재상태 = 추적;
            break;
        case 추적:
            // 추적 행동 수행
            if(공격범위_도달()) 현재상태 = 공격;
            break;
        //기타 상태들
```




활용: NPC의 행동 패턴(예: 순찰, 공격, 도주 등) 구현.

게임 예시: 
《Assassin's Creed》의 AI경비병이 순찰→의심→경계→추격→공격 순으로 상태 전환
《바이오하자드》: 좀비가 배회→추적→공격 상태를 오가며 플레이어 위협


여기에서 상태기계 알고리즘과 BFS/DFS 의 차이점 ?

BFS/DFS 또한 플레이어에게 걸어두고 길찾기 알고리즘을 구사것과 FSM도 길찾는것도 똑같은데 어떤점이 다를까 ? 

FSM 은 행동을 결정하는거고

BFS/DFS 는 경로 탐색 원툴

실제로 게임예시로 

《리그 오브 레전드》의 미니언은:

FSM: 공격 대상 선정, 전투/이동 상태 관리

경로 탐색: 목표까지 가는 최적 경로 계산 (A*나 네비게이션 메시 사용) 을 한다고합니다~ 


